# 搜索功能问题调查

## 简介

本规格文件旨在调查和解决 TelegramSearchBot 中的搜索功能问题。根据用户反馈，搜索功能出现异常：某些关键词（如"测试"）可以正常搜索到结果，但其他明确存在于聊天记录中的字符串子串却无法搜索到。问题可能出现在搜索模块或最近添加的检索语法功能中。

## 需求列表

1. 作为用户，我希望能够搜索到所有存在于聊天记录中的字符串子串，以便快速找到相关信息。
   1.1. 搜索功能应能正确索引所有新添加的消息内容
   1.2. 搜索功能应返回所有匹配的搜索结果，不应遗漏
   1.3. 搜索功能应对所有用户可搜索的内容保持一致性

2. 作为开发者，我需要一个稳定的搜索模块，保证所有类型的内容都能被正确索引和搜索。
   2.1. 系统应正确处理文本、OCR识别结果和ASR识别结果的索引
   2.2. 系统不应因部分消息内容的缺失而导致搜索失败
   2.3. 消息索引过程应具备错误处理和日志记录能力

3. 作为系统维护者，我希望搜索功能的修改不会破坏现有功能。
   3.1. 所有搜索相关修改应通过单元测试验证
   3.2. 搜索功能应保持向后兼容性
   3.3. 系统应记录搜索失败的相关日志以帮助问题诊断